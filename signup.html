{% extends "base.html" %}
{% block title %}Signups{% endblock %}
{% block content %}

<div class="page-header">
  <h1>Signups</h1>
  <p>{{ date }}</p>
</div>

<div class="row">
  <div class="col-md-8">
    <div class="panel panel-success">
      <div class="panel-heading">
        <span class="badge">{{ entries_c|length }}</span> 
        Committed Players
      </div>
      <table class="table table-hover">
        <tr>
          <th class="text-center">#</th>
          <th>Player</th>
          <th>Comment</th>
        </tr>
        {% for entry in entries_c %}
          <tr>
            <td class="text-center">{{ loop.index }}</td>
            <td><a href="mailto:{{ entry.player.email }}">{{entry.player.name}}</a></td>
            <td>{{ entry.comment }}</td>
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-8">
    <div class="panel panel-warning">
      <div class="panel-heading">
        <span class="badge">{{ entries_m|length }}</span> 
        Maybe Players
      </div>
      <table class="table table-hover">
        <tr>
          <th class="text-center">#</th>
          <th>Player</th>
          <th>Comment</th>
        </tr>
        {% for entry in entries_m %}
          <tr>
            <td class="text-center">{{ loop.index }}</td>
            <td><a href="mailto:{{ entry.player.email }}">{{entry.player.name}}</a></td>
            <td>{{ entry.comment }}</td>
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>
</div>

{% if login.logged_in %}
{% if is_signed_up %}

<!-- Unsignup Form -->
<div class="row">
  <div class="col-md-8">
    <form class="form-horizontal" action="{{ vball_type }}/unsignup" method="post">
      <div class="btn-group btn-group-justified" role="group">
        <div class="btn-group" role="group">
          {% if signed_up_entry.committed %}
            <input id="commit" name="action" type="submit" class="btn btn-success" value="Committed" disabled="disabled">
          {% else %}
            <input id="maybe"  name="action" type="submit" class="btn btn-warning" value="Maybe"     disabled="disabled">
          {% endif %}
        </div>
        <div class="btn-group" role="group">
          <input id="unsignup" name="action" type="submit" class="btn btn-danger" value="Unsignup">
        </div>
      </div>
  </form>
  </div>
</div>

{% else %}

<!-- Signup Form -->
<div class="row">
  <div class="col-md-8">
    <form class="form-horizontal" action="{{ vball_type }}/signup" method="post">
      <div class="well">
         <input id="comment" name="comment" type="text" class="form-control" placeholder="Snarky and/or informative comment">
      </div>
      <div class="btn-group btn-group-justified" role="group">
        <div class="btn-group" role="group">
            <input id="commit" name="action" type="submit" class="btn btn-success" value="Commit">
        </div>
        <div class="btn-group" role="group">
            <input id="maybe"  name="action" type="submit" class="btn btn-warning" value="Maybe" >
        </div>
      </div>
  </form>
  </div>
</div>

{% endif %}
{% else %}

<!-- Login Form -->
<div class="row">
  <div class="col-md-8">
    <a role="button" class="btn btn-primary btn-block" href="{{ login.url }}">Login to sign up</a> 
  </div>
</div>

{% endif %}

{% endblock %}
